<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–º–µ–π–ª –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä (EUR)</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* Slate-100 */
        }

        /* Custom Input Styles to match React App */
        .custom-input {
            background-color: #f8fafc; /* Slate-50 */
            border: 1px solid #e2e8f0; /* Slate-200 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            font-weight: 700;
            color: #334155; /* Slate-700 */
            outline: none;
            width: 100%;
            transition: all 0.2s;
        }
        .custom-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        .custom-label {
            display: block;
            font-size: 0.65rem;
            font-weight: 900;
            text-transform: uppercase;
            color: #94a3b8; /* Slate-400 */
            margin-bottom: 0.25rem;
            margin-left: 0.25rem;
            letter-spacing: 0.05em;
        }

        /* Tab styles */
        .tab-btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            border-radius: 0.75rem;
            color: #64748b; /* Slate-500 */
            transition: all 0.2s;
        }
        .tab-btn:hover {
            background-color: #f1f5f9;
            color: #3b82f6;
        }
        .tab-btn.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);
        }

        /* Result Box */
        .result-box {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            padding: 1.5rem;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.85rem;
            color: #334155;
            white-space: pre-wrap;
            min-height: 200px;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .checkbox-wrapper:hover {
            background-color: #f1f5f9;
        }
        input[type="checkbox"], input[type="radio"] {
            accent-color: #3b82f6;
            width: 1rem;
            height: 1rem;
        }
        
        .hidden { display: none; }
    </style>
</head>
<body class="antialiased min-h-screen pb-20 p-6">

    <div class="max-w-5xl mx-auto">
        
        <div class="bg-white rounded-[2rem] shadow-sm border border-slate-200 p-6 mb-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <h1 class="text-2xl font-black text-slate-800 uppercase tracking-tighter">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –ò–º–µ–π–ª–∏</h1>
                <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mt-1">–û—Ñ–∏—Ü–∏–∞–ª–Ω–∞ –≤–∞–ª—É—Ç–∞: –ï–í–†–û (‚Ç¨)</p>
            </div>
            <div class="flex bg-slate-100 p-1 rounded-2xl">
                <button id="offer-tab-btn" onclick="switchTab('offer')" class="tab-btn active rounded-xl">–û—Ñ–µ—Ä—Ç–∞</button>
                <button id="conf-tab-btn" onclick="switchTab('conf')" class="tab-btn rounded-xl">–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</button>
            </div>
        </div>

        <div class="bg-white rounded-[2.5rem] shadow-xl border border-slate-100 overflow-hidden p-8">

            <div id="offer-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        
                        <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                            <label class="custom-label mb-2">–¢–∏–ø –æ—Ñ–µ—Ä—Ç–∞</label>
                            <div class="flex flex-col gap-2">
                                <label class="checkbox-wrapper">
                                    <input type="radio" name="offerType" value="standard" checked onchange="toggleOfferTypeFields()">
                                    <span class="text-sm font-bold text-slate-600">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –æ—Ñ–µ—Ä—Ç–∞</span>
                                </label>
                                <label class="checkbox-wrapper">
                                    <input type="radio" name="offerType" value="otherDates" onchange="toggleOfferTypeFields()">
                                    <span class="text-sm font-bold text-slate-600">–û—Ñ–µ—Ä—Ç–∞ –∑–∞ –¥—Ä—É–≥–∏ –¥–∞—Ç–∏</span>
                                </label>
                                <label class="checkbox-wrapper">
                                    <input type="radio" name="offerType" value="noOffer" onchange="toggleOfferTypeFields()">
                                    <span class="text-sm font-bold text-slate-600">–ù—è–º–∞ –æ—Ñ–µ—Ä—Ç–∞ (–û—Ç–∫–∞–∑)</span>
                                </label>
                            </div>
                        </div>

                        <div id="offerDetailsFields" class="space-y-4">
                            <div>
                                <label class="custom-label">üè® –•–æ—Ç–µ–ª</label>
                                <select id="offerHotelSelect" class="custom-input" onchange="toggleCustomInput('offerHotelSelect', 'customOfferHotelNameInput')">
                                    <option value="">-- –ò–∑–±–µ—Ä–µ—Ç–µ —Ö–æ—Ç–µ–ª --</option>
                                    <option value="other">–†—ä—á–Ω–æ –≤—ä–≤–µ–∂–¥–∞–Ω–µ</option>
                                    <option value="Crystal Deluxe Resort & Spa">Crystal Deluxe Resort & Spa</option>
                                    <option value="Rixos Premium Belek">Rixos Premium Belek</option>
                                    <option value="Titanic Deluxe Lara">Titanic Deluxe Lara</option>
                                </select>
                                <input type="text" id="customOfferHotelNameInput" class="custom-input mt-2 hidden" placeholder="–ò–º–µ –Ω–∞ —Ö–æ—Ç–µ–ª...">
                            </div>

                            <div class="bg-blue-50/50 p-4 rounded-2xl border border-blue-100/50">
                                <label class="custom-label text-blue-400">üóìÔ∏è –ü–µ—Ä–∏–æ–¥</label>
                                <div class="flex gap-4 mb-2">
                                    <label class="checkbox-wrapper"><input type="radio" name="periodOptionOffer" value="dates" checked onchange="togglePeriodInput('offer', 'dates')"><span class="text-xs font-bold">–î–∞—Ç–∏</span></label>
                                    <label class="checkbox-wrapper"><input type="radio" name="periodOptionOffer" value="manual" onchange="togglePeriodInput('offer', 'manual')"><span class="text-xs font-bold">–†—ä—á–Ω–æ</span></label>
                                </div>
                                <div id="offerDateInputs">
                                    <div class="grid grid-cols-2 gap-2">
                                        <input type="date" id="offerCheckInDate" class="custom-input bg-white" onchange="calculateNights('offer')">
                                        <input type="date" id="offerCheckOutDate" class="custom-input bg-white" onchange="calculateNights('offer')">
                                    </div>
                                    <p id="offerNightsDisplay" class="text-center text-xs font-black text-blue-500 mt-2 uppercase">0 –ù–æ—â—É–≤–∫–∏</p>
                                </div>
                                <div id="offerManualPeriodInput" class="hidden">
                                    <input type="text" id="offerManualPeriod" placeholder="–Ω–∞–ø—Ä. 15-20 –Æ–ª–∏ (5 –Ω–æ—â—É–≤–∫–∏)" class="custom-input bg-white">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="custom-label">–í—ä–∑—Ä–∞—Å—Ç–Ω–∏</label>
                                    <input type="number" id="numAdultsOffer" value="2" class="custom-input">
                                </div>
                                <div>
                                    <label class="custom-label">–î–µ—Ü–∞</label>
                                    <input type="number" id="numChildrenOffer" value="0" class="custom-input">
                                </div>
                            </div>
                            <div>
                                <label class="custom-label">–í—ä–∑—Ä–∞—Å—Ç –Ω–∞ –¥–µ—Ü–∞ (–∞–∫–æ –∏–º–∞)</label>
                                <input type="text" id="childrenAgesOffer" placeholder="–Ω–∞–ø—Ä. 5, 12" class="custom-input">
                            </div>

                            <div>
                                <label class="custom-label">üçΩÔ∏è –ò–∑—Ö—Ä–∞–Ω–≤–∞–Ω–µ</label>
                                <select id="mealPlanSelectOffer" class="custom-input" onchange="toggleCustomInput('mealPlanSelectOffer', 'customMealPlanInputOffer')">
                                    <option value="All Inclusive (–≤—Å–∏—á–∫–æ –≤–∫–ª—é—á–µ–Ω–æ)">All Inclusive</option>
                                    <option value="Ultra All Inclusive">Ultra All Inclusive</option>
                                    <option value="Half Board (–ø–æ–ª—É–ø–∞–Ω—Å–∏–æ–Ω)">Half Board</option>
                                    <option value="Bed & Breakfast">Bed & Breakfast</option>
                                    <option value="other">–î—Ä—É–≥–æ...</option>
                                </select>
                                <input type="text" id="customMealPlanInputOffer" class="custom-input mt-2 hidden" placeholder="–¢–∏–ø –∏–∑—Ö—Ä–∞–Ω–≤–∞–Ω–µ...">
                            </div>

                            <div>
                                <label class="custom-label">üõèÔ∏è –¢–∏–ø —Å—Ç–∞—è</label>
                                <input type="text" id="roomTypeOffer" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Å—Ç–∞—è —Å –∏–∑–≥–ª–µ–¥..." class="custom-input">
                            </div>

                            <div>
                                <label class="custom-label text-emerald-600">üí∞ –¶–µ–Ω–∞ (‚Ç¨)</label>
                                <input type="text" id="price" placeholder="–Ω–∞–ø—Ä. 59 –µ–≤—Ä–æ –Ω–∞ —á–æ–≤–µ–∫" class="custom-input border-emerald-200 focus:border-emerald-500">
                            </div>

                            <div>
                                <label class="custom-label">üéÅ –ë–æ–Ω—É—Å / –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</label>
                                <input type="text" id="bonus" placeholder="–ë–æ–Ω—É—Å (–Ω–∞–ø—Ä. —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä)" class="custom-input mb-2">
                                <input type="text" id="offerTransport" placeholder="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–µ—Ç–∞–π–ª–∏..." class="custom-input">
                            </div>

                            <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                                <label class="custom-label mb-2">‚úÖ –í–∫–ª—é—á–µ–Ω–æ –≤ —Ü–µ–Ω–∞—Ç–∞</label>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs font-medium text-slate-600">
                                    <label class="checkbox-wrapper"><input type="checkbox" id="include-allInclusive" class="offer-include-checkbox" checked> All Inclusive –ø—Ä–æ–≥—Ä–∞–º–∞</label>
                                    <label class="checkbox-wrapper"><input type="checkbox" id="include-privateBeach" class="offer-include-checkbox" checked> –ß–∞—Å—Ç–µ–Ω –ø–ª–∞–∂</label>
                                    <label class="checkbox-wrapper"><input type="checkbox" id="include-poolsSpaFitness" class="offer-include-checkbox" checked> –ë–∞—Å–µ–π–Ω–∏ & –°–ü–ê</label>
                                    <label class="checkbox-wrapper"><input type="checkbox" id="include-kidsClub" class="offer-include-checkbox" checked> –î–µ—Ç—Å–∫–∏ –∫–ª—É–±</label>
                                    <label class="checkbox-wrapper"><input type="checkbox" id="include-wifi" class="offer-include-checkbox" checked> Wi-Fi</label>
                                </div>
                                <textarea id="customIncludedItems" rows="2" placeholder="–î—Ä—É–≥–∏ (–ø–æ –µ–¥–Ω–æ –Ω–∞ —Ä–µ–¥)..." class="custom-input mt-2 text-xs"></textarea>
                            </div>
                        </div>

                        <div id="otherDatesInput" class="hidden">
                            <label class="custom-label">üìÖ –ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏ –¥–∞—Ç–∏</label>
                            <textarea id="alternativeDates" rows="4" class="custom-input" placeholder="–û–ø–∏—à–µ—Ç–µ –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏..."></textarea>
                        </div>
                        <div id="noOfferReasonInput" class="hidden">
                            <label class="custom-label">‚ùå –ü—Ä–∏—á–∏–Ω–∞ –∑–∞ –æ—Ç–∫–∞–∑</label>
                            <textarea id="noOfferReason" rows="4" class="custom-input" placeholder="–ù—è–º–∞ –º–µ—Å—Ç–∞ / –•–æ—Ç–µ–ª—ä—Ç –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω..."></textarea>
                        </div>

                        <button onclick="generateEmail('offer')" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-2xl font-black uppercase tracking-wider shadow-lg shadow-blue-500/30 transition-transform active:scale-95">
                            –ì–µ–Ω–µ—Ä–∏—Ä–∞–π –û—Ñ–µ—Ä—Ç–∞
                        </button>
                    </div>

                    <div>
                        <div class="sticky top-6">
                            <div class="flex justify-between items-center mb-2">
                                <label class="custom-label text-slate-400">–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏–º–µ–π–ª–∞</label>
                                <button onclick="copyEmail('offer')" class="text-xs font-bold text-blue-600 hover:bg-blue-50 px-3 py-1 rounded-lg transition-colors">–ö–æ–ø–∏—Ä–∞–π —Ç–µ–∫—Å—Ç–∞</button>
                            </div>
                            <div id="generatedOfferEmail" class="result-box">
                                –ü–æ–ø—ä–ª–Ω–µ—Ç–µ –ø–æ–ª–µ—Ç–∞—Ç–∞ –∏ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ –±—É—Ç–æ–Ω–∞ –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="conf-section" class="hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="custom-label">üë§ –ò–º–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç</label>
                                <input type="text" id="clientName" class="custom-input">
                            </div>
                            <div>
                                <label class="custom-label">üî¢ –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è ‚Ññ</label>
                                <input type="text" id="reservationNumber" class="custom-input">
                            </div>
                        </div>

                        <div>
                            <label class="custom-label">üè® –•–æ—Ç–µ–ª</label>
                            <select id="confHotelSelect" class="custom-input" onchange="toggleCustomInput('confHotelSelect', 'customConfHotelNameInput')">
                                <option value="">-- –ò–∑–±–µ—Ä–µ—Ç–µ —Ö–æ—Ç–µ–ª --</option>
                                <option value="other">–†—ä—á–Ω–æ –≤—ä–≤–µ–∂–¥–∞–Ω–µ</option>
                                <option value="Crystal Deluxe Resort & Spa">Crystal Deluxe Resort & Spa</option>
                            </select>
                            <input type="text" id="customConfHotelNameInput" class="custom-input mt-2 hidden">
                        </div>

                        <div class="bg-blue-50/50 p-4 rounded-2xl border border-blue-100/50">
                            <label class="custom-label text-blue-400">üóìÔ∏è –ü–µ—Ä–∏–æ–¥</label>
                            <div class="flex gap-4 mb-2">
                                <label class="checkbox-wrapper"><input type="radio" name="periodOptionConf" value="dates" checked onchange="togglePeriodInput('conf', 'dates')"><span class="text-xs font-bold">–î–∞—Ç–∏</span></label>
                                <label class="checkbox-wrapper"><input type="radio" name="periodOptionConf" value="manual" onchange="togglePeriodInput('conf', 'manual')"><span class="text-xs font-bold">–†—ä—á–Ω–æ</span></label>
                            </div>
                            <div id="confDateInputs">
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="date" id="confCheckInDate" class="custom-input bg-white" onchange="calculateNights('conf')">
                                    <input type="date" id="confCheckOutDate" class="custom-input bg-white" onchange="calculateNights('conf')">
                                </div>
                                <p id="confNightsDisplay" class="text-center text-xs font-black text-blue-500 mt-2 uppercase">0 –ù–æ—â—É–≤–∫–∏</p>
                            </div>
                            <div id="confManualPeriodInput" class="hidden">
                                <input type="text" id="confManualPeriod" placeholder="–Ω–∞–ø—Ä. 15-20 –Æ–ª–∏ (5 –Ω–æ—â—É–≤–∫–∏)" class="custom-input bg-white">
                            </div>
                        </div>

                        <div>
                            <label class="custom-label">üçΩÔ∏è –ò–∑—Ö—Ä–∞–Ω–≤–∞–Ω–µ</label>
                            <select id="mealPlanSelectConf" class="custom-input" onchange="toggleCustomInput('mealPlanSelectConf', 'customMealPlanInputConf')">
                                <option value="All Inclusive (–≤—Å–∏—á–∫–æ –≤–∫–ª—é—á–µ–Ω–æ)">All Inclusive</option>
                                <option value="Ultra All Inclusive">Ultra All Inclusive</option>
                                <option value="other">–î—Ä—É–≥–æ...</option>
                            </select>
                            <input type="text" id="customMealPlanInputConf" class="custom-input mt-2 hidden">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="custom-label">–í—ä–∑—Ä–∞—Å—Ç–Ω–∏</label>
                                <input type="number" id="numAdultsConf" value="2" class="custom-input">
                            </div>
                            <div>
                                <label class="custom-label">–î–µ—Ü–∞</label>
                                <input type="number" id="numChildrenConf" value="0" class="custom-input">
                            </div>
                        </div>
                        <div>
                            <input type="text" id="childrenAgesConf" placeholder="–í—ä–∑—Ä–∞—Å—Ç –Ω–∞ –¥–µ—Ü–∞..." class="custom-input">
                        </div>
                        <div>
                            <label class="custom-label">üõèÔ∏è –¢–∏–ø —Å—Ç–∞—è</label>
                            <input type="text" id="roomTypeConf" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Å—Ç–∞—è..." class="custom-input">
                        </div>

                        <div>
                            <label class="custom-label text-emerald-600">üí∞ –ö—Ä–∞–π–Ω–∞ –¶–µ–Ω–∞ (‚Ç¨)</label>
                            <input type="text" id="confPrice" placeholder="590 –µ–≤—Ä–æ –æ–±—â–æ" class="custom-input border-emerald-200">
                        </div>
                        <div>
                            <label class="custom-label text-emerald-600">üí∏ –ü–ª–∞—Ç–µ–Ω–æ –ö–∞–ø–∞—Ä–æ (‚Ç¨)</label>
                            <input type="text" id="confDeposit" placeholder="200 –µ–≤—Ä–æ (–æ—Å—Ç–∞—Ç—ä–∫ –¥–æ...)" class="custom-input border-emerald-200">
                        </div>

                        <div>
                            <label class="custom-label">üöå –¢—Ä–∞–Ω—Å—Ñ–µ—Ä</label>
                            <input type="text" id="confTransfer" placeholder="–í–∫–ª—é—á–µ–Ω —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä..." class="custom-input">
                        </div>

                        <div>
                            <label class="custom-label">üö´ –ê–Ω—É–ª–∞—Ü–∏—è</label>
                            <textarea id="cancellationPolicy" rows="2" class="custom-input" placeholder="–£—Å–ª–æ–≤–∏—è –∑–∞ –∞–Ω—É–ª–∞—Ü–∏—è..."></textarea>
                        </div>

                        <button onclick="generateEmail('confirmation')" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white py-4 rounded-2xl font-black uppercase tracking-wider shadow-lg shadow-emerald-500/30 transition-transform active:scale-95">
                            –ì–µ–Ω–µ—Ä–∏—Ä–∞–π –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ
                        </button>
                    </div>

                    <div>
                        <div class="sticky top-6">
                            <div class="flex justify-between items-center mb-2">
                                <label class="custom-label text-slate-400">–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏–º–µ–π–ª–∞</label>
                                <button onclick="copyEmail('confirmation')" class="text-xs font-bold text-emerald-600 hover:bg-emerald-50 px-3 py-1 rounded-lg transition-colors">–ö–æ–ø–∏—Ä–∞–π —Ç–µ–∫—Å—Ç–∞</button>
                            </div>
                            <div id="generatedConfirmationEmail" class="result-box border-emerald-100 bg-emerald-50/30">
                                –ü–æ–ø—ä–ª–Ω–µ—Ç–µ –ø–æ–ª–µ—Ç–∞—Ç–∞ –∏ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ –±—É—Ç–æ–Ω–∞ –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Shared Logic
        function switchTab(tab) {
            document.getElementById('offer-section').classList.add('hidden');
            document.getElementById('conf-section').classList.add('hidden');
            document.getElementById('offer-tab-btn').classList.remove('active', 'bg-blue-600', 'text-white', 'shadow-md');
            document.getElementById('conf-tab-btn').classList.remove('active', 'bg-blue-600', 'text-white', 'shadow-md');
            
            document.getElementById(`${tab}-section`).classList.remove('hidden');
            const btn = document.getElementById(`${tab}-tab-btn`);
            btn.classList.add('active');
        }

        function toggleCustomInput(selectId, inputId) {
            const select = document.getElementById(selectId);
            const input = document.getElementById(inputId);
            if (select.value === 'other') {
                input.classList.remove('hidden');
                input.focus();
            } else {
                input.classList.add('hidden');
            }
        }

        function togglePeriodInput(section, type) {
            if (type === 'dates') {
                document.getElementById(`${section}DateInputs`).classList.remove('hidden');
                document.getElementById(`${section}ManualPeriodInput`).classList.add('hidden');
            } else {
                document.getElementById(`${section}DateInputs`).classList.add('hidden');
                document.getElementById(`${section}ManualPeriodInput`).classList.remove('hidden');
            }
        }

        function calculateNights(section) {
            const inDate = new Date(document.getElementById(`${section}CheckInDate`).value);
            const outDate = new Date(document.getElementById(`${section}CheckOutDate`).value);
            const display = document.getElementById(`${section}NightsDisplay`);
            
            if (inDate && outDate && outDate > inDate) {
                const diff = Math.ceil(Math.abs(outDate - inDate) / (1000 * 60 * 60 * 24));
                display.textContent = `${diff} –ù–æ—â—É–≤–∫–∏`;
            } else {
                display.textContent = '0 –ù–æ—â—É–≤–∫–∏';
            }
        }

        function getPeriodString(section) {
            const isDates = document.querySelector(`input[name="periodOption${section === 'offer' ? 'Offer' : 'Conf'}"]:checked`).value === 'dates';
            if (isDates) {
                const inDate = document.getElementById(`${section}CheckInDate`).value;
                const outDate = document.getElementById(`${section}CheckOutDate`).value;
                const nights = document.getElementById(`${section}NightsDisplay`).textContent.replace(' –ù–æ—â—É–≤–∫–∏', '');
                
                if (inDate && outDate && nights !== '0') {
                    const format = d => new Date(d).toLocaleDateString('bg-BG', {day:'numeric', month:'long', year:'numeric'});
                    return `${format(inDate)} ‚Äì ${format(outDate)} (${nights} –Ω–æ—â—É–≤–∫–∏)`;
                }
                return '[–ü–µ—Ä–∏–æ–¥]';
            } else {
                return document.getElementById(`${section}ManualPeriod`).value || '[–ü–µ—Ä–∏–æ–¥]';
            }
        }

        function getSelectValue(selectId, inputId) {
            const sel = document.getElementById(selectId);
            return sel.value === 'other' ? document.getElementById(inputId).value : sel.value;
        }

        function toggleOfferTypeFields() {
            const type = document.querySelector('input[name="offerType"]:checked').value;
            const standard = document.getElementById('offerDetailsFields');
            const other = document.getElementById('otherDatesInput');
            const none = document.getElementById('noOfferReasonInput');

            standard.classList.add('hidden');
            other.classList.add('hidden');
            none.classList.add('hidden');

            if (type === 'standard') standard.classList.remove('hidden');
            else if (type === 'otherDates') { standard.classList.remove('hidden'); other.classList.remove('hidden'); }
            else if (type === 'noOffer') none.classList.remove('hidden');
        }

        // Generate Logic
        const AGENCY_INFO = `
–° —É–≤–∞–∂–µ–Ω–∏–µ,
–ö—Ä–∞—Å–∏–º–∏—Ä –ê–Ω–∞–Ω–æ–≤
"–î–∞–π–Ω–∞–º–µ–∫—Å –¢—É—Ä"
üìß info@dynamextour.com | üìû +359 879 97 6446 | üåê www.dynamextour.com`;

        const ADS = `
üåç –û—Å—Ç–∞–Ω–µ—Ç–µ —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å Holafly eSIM (5% –æ—Ç—Å—Ç—ä–ø–∫–∞ —Å –∫–æ–¥ DYNAMEX5): https://holafly.sjv.io/6yD1Gq
‚öïÔ∏è –ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞ –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∑–∞ –ø—ä—Ç—É–≤–∞–Ω–µ –≤ —á—É–∂–±–∏–Ω–∞.`;

        function generateEmail(type) {
            let body = '', subject = '';

            if (type === 'offer') {
                const offerType = document.querySelector('input[name="offerType"]:checked').value;
                
                if (offerType === 'noOffer') {
                    subject = "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–Ω–æ—Å–Ω–æ –í–∞—à–µ—Ç–æ –∑–∞–ø–∏—Ç–≤–∞–Ω–µ";
                    body = `–ó–¥—Ä–∞–≤–µ–π—Ç–µ,\n–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –∑–∞–ø–∏—Ç–≤–∞–Ω–µ—Ç–æ.\n\n${document.getElementById('noOfferReason').value || '–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –º–µ—Å—Ç–∞.'}\n\n–ú–æ–ª—è —Å–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å –Ω–∞—Å –∑–∞ –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏.\n${AGENCY_INFO}`;
                } else {
                    const hotel = getSelectValue('offerHotelSelect', 'customOfferHotelNameInput') || '–ò–∑–±—Ä–∞–Ω –•–æ—Ç–µ–ª';
                    const period = getPeriodString('offer');
                    const meal = getSelectValue('mealPlanSelectOffer', 'customMealPlanInputOffer');
                    const adults = document.getElementById('numAdultsOffer').value;
                    const children = document.getElementById('numChildrenOffer').value;
                    const ages = document.getElementById('childrenAgesOffer').value;
                    const pax = `${adults} –≤—ä–∑—Ä–∞—Å—Ç–Ω–∏${children > 0 ? ` –∏ ${children} –¥–µ—Ü–∞` : ''}${ages ? ` (${ages}–≥.)` : ''}`;
                    const room = document.getElementById('roomTypeOffer').value || '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞';
                    const price = document.getElementById('price').value || '–ü–æ –∑–∞–ø–∏—Ç–≤–∞–Ω–µ';
                    const bonus = document.getElementById('bonus').value;
                    const transport = document.getElementById('offerTransport').value;
                    
                    // Included items
                    let included = [];
                    document.querySelectorAll('.offer-include-checkbox:checked').forEach(c => included.push(`- ${c.parentNode.textContent.trim()}`));
                    const customInc = document.getElementById('customIncludedItems').value;
                    if(customInc) customInc.split('\n').forEach(l => { if(l.trim()) included.push(`- ${l.trim()}`); });

                    subject = `‚úÖ –û—Ñ–µ—Ä—Ç–∞ –∑–∞ –Ω–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ: ${hotel}`;
                    body = `–ó–¥—Ä–∞–≤–µ–π—Ç–µ,\n–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –í–∏ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞! –ï—Ç–æ –Ω–∞—à–∞—Ç–∞ –æ—Ñ–µ—Ä—Ç–∞:\n\n` +
                           `üè® –•–æ—Ç–µ–ª: ${hotel}\n` +
                           `üóìÔ∏è –ü–µ—Ä–∏–æ–¥: ${period}\n` +
                           `üçΩÔ∏è –ò–∑—Ö—Ä–∞–Ω–≤–∞–Ω–µ: ${meal}\n` +
                           `üõèÔ∏è –ù–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ: ${pax} –≤ ${room}\n` +
                           `üí∞ –¶–µ–Ω–∞: ${price}\n` +
                           (bonus ? `üéÅ –ë–æ–Ω—É—Å: ${bonus}\n` : '') +
                           (transport ? `üöå –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: ${transport}\n` : '') +
                           `\n‚úÖ –í —Ü–µ–Ω–∞—Ç–∞ –µ –≤–∫–ª—é—á–µ–Ω–æ:\n${included.join('\n')}\n` +
                           (offerType === 'otherDates' ? `\nüìÖ –ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏ –æ–ø—Ü–∏–∏:\n${document.getElementById('alternativeDates').value}\n` : '') +
                           `\n‚ùó –û—Ñ–µ—Ä—Ç–∞—Ç–∞ –µ –≤–∞–ª–∏–¥–Ω–∞ –∫—ä–º –º–æ–º–µ–Ω—Ç–∞. –ú–µ—Å—Ç–∞—Ç–∞ —Å–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏.\n` +
                           `${ADS}\n${AGENCY_INFO}`;
                }
                document.getElementById('generatedOfferEmail').textContent = `–¢–µ–º–∞: ${subject}\n\n${body}`;
            } 
            else if (type === 'confirmation') {
                const name = document.getElementById('clientName').value || '–ö–ª–∏–µ–Ω—Ç';
                const resNum = document.getElementById('reservationNumber').value || '---';
                const hotel = getSelectValue('confHotelSelect', 'customConfHotelNameInput');
                const period = getPeriodString('conf');
                const meal = getSelectValue('mealPlanSelectConf', 'customMealPlanInputConf');
                const price = document.getElementById('confPrice').value;
                const deposit = document.getElementById('confDeposit').value;
                const transfer = document.getElementById('confTransfer').value;
                const cancel = document.getElementById('cancellationPolicy').value;

                const bankInfo = `–ü–ª–∞—â–∞–Ω–µ –Ω–∞ –∫–∞–ø–∞—Ä–æ:\n–í –±—Ä–æ–π –≤ –æ—Ñ–∏—Å –†–∞–∫–∏—Ç–æ–≤–æ –∏–ª–∏ –ø–æ –±–∞–Ω–∫–∞:\nIBAN: BG87BPBI79301036586601\n–ü–æ–ª—É—á–∞—Ç–µ–ª: –î–ê–ô–ù–ê–ú–ï–ö–° –¢–£–†\n–û—Å–Ω–æ–≤–∞–Ω–∏–µ: –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è ${resNum}`;

                subject = `üõéÔ∏è –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è ${resNum} ‚Äì ${hotel}`;
                body = `–ó–¥—Ä–∞–≤–µ–π—Ç–µ ${name},\n–ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞–º–µ –í–∞—à–∞—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è!\n\n` +
                       `üî¢ –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è ‚Ññ: ${resNum}\n` +
                       `üè® –•–æ—Ç–µ–ª: ${hotel}\n` +
                       `üóìÔ∏è –ü–µ—Ä–∏–æ–¥: ${period}\n` +
                       `üçΩÔ∏è –ò–∑—Ö—Ä–∞–Ω–≤–∞–Ω–µ: ${meal}\n` +
                       `üí∞ –¶–µ–Ω–∞: ${price}\n` +
                       `üí∏ –ü–ª–∞—Ç–µ–Ω–æ –∫–∞–ø–∞—Ä–æ: ${deposit}\n` +
                       (transfer ? `üöå –¢—Ä–∞–Ω—Å—Ñ–µ—Ä: ${transfer}\n` : '') +
                       `\nüìù –î–µ—Ç–∞–π–ª–∏ –∑–∞ –ø–ª–∞—â–∞–Ω–µ:\n${bankInfo}\n` +
                       (cancel ? `\nüö´ –ê–Ω—É–ª–∞—Ü–∏—è:\n${cancel}\n` : '') +
                       `\nüìÑ –í–∞—É—á–µ—Ä—ä—Ç –∏ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞ —â–µ –±—ä–¥–∞—Ç –∏–∑–ø—Ä–∞—Ç–µ–Ω–∏ –¥–æ 24—á.\n` +
                       `${ADS}\n${AGENCY_INFO}`;
                
                document.getElementById('generatedConfirmationEmail').textContent = `–¢–µ–º–∞: ${subject}\n\n${body}`;
            }
        }

        function copyEmail(type) {
            const id = type === 'offer' ? 'generatedOfferEmail' : 'generatedConfirmationEmail';
            const text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text).then(() => alert('–¢–µ–∫—Å—Ç—ä—Ç –µ –∫–æ–ø–∏—Ä–∞–Ω!'));
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            // Populate select lists with the massive hotel list from original code if needed
            // For now, key examples are included in HTML
            // Set defaults
            toggleOfferTypeFields();
        });
    </script>
</body>
</html>
